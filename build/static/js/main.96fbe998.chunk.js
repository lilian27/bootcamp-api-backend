(this.webpackJsonppart1=this.webpackJsonppart1||[]).push([[0],{24:function(e,t,n){},26:function(e,t,n){},46:function(e,t,n){"use strict";n.r(t);var c=n(1),r=n(19),a=n.n(r),i=(n(24),n(5)),o=n.n(i),s=n(6),u=n(10),l=n(2),j=(n(26),n(0)),b=function(e){return Object(j.jsx)("div",{children:e.counter})},d=function(e){return Object(j.jsx)("button",{onClick:e.handleClick,children:e.text})},O=function(e){var t=e.note,n=e.toggleImportance,c=t.important?"hacer no importante":"make important";return Object(j.jsxs)("li",{className:"note",children:[t.content,Object(j.jsxs)("button",{onClick:n,children:[" ",c]})]})},h=function(e){var t=e.persona,n=e.handleDelete;return Object(j.jsx)("div",{children:Object(j.jsxs)("li",{children:[Object(j.jsx)("span",{children:t.name}),Object(j.jsxs)("span",{children:[" ",t.number]}),Object(j.jsx)("button",{type:"button",onClick:n,children:" Eliminar"})]})})},f=n(4),p=n.n(f),x="https://tranquil-garden-51248.herokuapp.com/api/persons",v=function(){return p.a.get(x).then((function(e){return e.data}))},g=function(e){return p.a.post(x,e).then((function(e){return e.data}))},m=function(e,t){return p.a.put("".concat(x,"/").concat(e),t).then((function(e){return e.data}))},S=function(e){return p.a.delete("".concat(x,"/").concat(e)).then((function(e){return e.data}))},w=function(e){var t=e.messaje,n=e.tipo,r=Object(c.useState)(null),a=Object(l.a)(r,2),i=a[0],o=a[1],s=Object(c.useState)(null),u=Object(l.a)(s,2),b=u[0],d=u[1];Object(c.useEffect)((function(){console.log("Mostrando error"),O(t,n)}),[t,n]);var O=function(e,t){o(e),d(t),setTimeout((function(){o(null)}),3e3)};if(null===t)return null;var h=1===b?"error":"process";return Object(j.jsx)("div",{className:h,children:i})},k=function(){var e=Object(c.useState)([]),t=Object(l.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(""),i=Object(l.a)(a,2),o=i[0],s=i[1],u=Object(c.useState)(""),b=Object(l.a)(u,2),d=b[0],O=b[1],f=Object(c.useState)(""),p=Object(l.a)(f,2),x=p[0],k=p[1],C=Object(c.useState)(null),y=Object(l.a)(C,2),N=y[0],T=y[1],E=Object(c.useState)(null),D=Object(l.a)(E,2),P=D[0],I=D[1];Object(c.useEffect)((function(){v().then((function(e){r(e)}))}),[]);var L,z=x.length>0?(L=x,n.filter((function(e){return e.name.toLowerCase().indexOf(L.toLowerCase())>-1}))):n,A=function(e,t){T(e),I(t),setTimeout((function(){T(null)}),3e3)};return Object(j.jsxs)("div",{children:[Object(j.jsx)("h2",{children:"Gu\xeda telefonica"}),Object(j.jsx)(w,{messaje:N,tipo:P}),Object(j.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t=n.filter((function(e){return e.name.toLowerCase()===o.toLowerCase()})),c={name:o,id:o,number:d};if(0===t.length)g(c).then((function(e){r(n.concat(c)),s(""),O(""),A("Persona ha sido agregada",0)})).catch((function(e){console.log("error ".concat(e)),A("Persona no puso ser agregada",1)}));else{var a=t[0].id;window.confirm("".concat(o," ya se encuentra registrado, \xbfDesea reemplazar el n\xfamero?"))&&m(a,c).then((function(e){r(n.map((function(t){return t.id!==a?t:e}))),A("N\xfamero telefonico fue actualizado!!!",0)}))}},children:[Object(j.jsxs)("div",{children:["Name: ",Object(j.jsx)("input",{value:o,onChange:function(e){s(e.target.value)}})]}),Object(j.jsxs)("div",{children:["Number: ",Object(j.jsx)("input",{value:d,onChange:function(e){O(e.target.value)}}),Object(j.jsx)("button",{type:"submit",children:"guardar"})]}),Object(j.jsxs)("div",{children:[Object(j.jsx)("h2",{children:"Numbers"}),Object(j.jsxs)("div",{children:["filter shown whith ",Object(j.jsx)("input",{value:x,onChange:function(e){k(e.target.value)}})]}),Object(j.jsx)("ul",{children:z.map((function(e){return Object(j.jsx)(h,{persona:e,handleDelete:function(){return t=e.id,void S(t).then((function(e){r(n.filter((function(e){return e.id!==t}))),A("Registro eliminado correctamente",0)})).catch((function(e){A("Un problema ha ocurrido",1)}));var t}},e.id)}))})]})]})]})},C=function(e){var t=e.pais,n=[];for(var c in console.log("detalle",t),t.languages)n.push(t.languages[c]);return Object(j.jsxs)("div",{children:[Object(j.jsx)("h2",{children:t.name.official}),Object(j.jsxs)("div",{children:[Object(j.jsx)("b",{children:"Capital:"})," ",Object(j.jsx)("span",{children:t.capital})]}),Object(j.jsxs)("div",{children:[Object(j.jsx)("b",{children:"Population:"})," ",Object(j.jsx)("span",{children:t.population})]}),Object(j.jsxs)("div",{children:[Object(j.jsx)("b",{children:"Lenguajes"}),Object(j.jsx)("ul",{children:n.map((function(e){return Object(j.jsx)("li",{children:e},e)}))}),t.flag,Object(j.jsx)("image",{src:t.flag,alt:"bandera",width:"8%"})]})]})},y=function(e){var t=e.pais;return Object(j.jsx)("div",{children:Object(j.jsxs)("li",{children:[" ",t.name.official," "]},t.name.official)})},N=function(e){var t=e.paises;return t.length>1?Object(j.jsx)("div",{children:Object(j.jsx)("ul",{children:t.map((function(e){return Object(j.jsx)(y,{pais:e})}))})}):Object(j.jsx)(C,{pais:t[0]})},T=function(){var e=Object(c.useState)(""),t=Object(l.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)([]),i=Object(l.a)(a,2),o=i[0],s=i[1];return Object(c.useEffect)((function(){if(""!==n){var e="https://restcountries.com/v3.1/name/".concat(n);p.a.get(e).then((function(e){s(e.data)})).catch((function(e){s([]),console.log("um error ha ocurrido",e)}))}}),[n]),Object(j.jsxs)("div",{children:[Object(j.jsxs)("div",{children:["Find countries ",Object(j.jsx)("input",{value:n,onChange:function(e){r(e.target.value)}})," "]}),Object(j.jsxs)("p",{children:[" Se han encontrado ",o.length," resultado(s)",o.length>10?", favor ser m\xe1s especifico.":""]}),o.length>0&&o.length<10?Object(j.jsx)(N,{paises:o}):null]})},E=function(){return Object(j.jsxs)("div",{children:[Object(j.jsx)("h2",{children:"Paises:"}),Object(j.jsx)(T,{})]})},D="https://tranquil-garden-51248.herokuapp.com/api/notes",P=null,I=function(){var e=Object(s.a)(o.a.mark((function e(t){var n,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:P}},e.next=3,p.a.post(D,t,n);case 3:return c=e.sent,e.abrupt("return",c.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),L={getAll:function(){var e=p.a.get(D),t={id:1e4,content:"This note is not saved to server",date:"2019-05-30T17:30:31.098Z",important:!0};return e.then((function(e){return e.data.concat(t)}))},create:I,update:function(e,t){return p.a.put("".concat(D,"/").concat(e),t).then((function(e){return e.data}))},setToken:function(e){P="bearer ".concat(e)}},z=function(){return Object(j.jsxs)("div",{style:{color:"green",fontStyle:"italic",fontSize:16},children:[Object(j.jsx)("br",{}),Object(j.jsxs)("em",{children:["Practice ",Object(j.jsx)("a",{href:"https://fullstackopen.com/",children:" bootcamp"})]})]})},A=function(){var e=Object(s.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.post("https://tranquil-garden-51248.herokuapp.com/api/login",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F={login:A};var R=function(){var e=Object(c.useState)(0),t=Object(l.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)([]),i=Object(l.a)(a,2),h=i[0],f=i[1],p=Object(c.useState)("a new note"),x=Object(l.a)(p,2),v=x[0],g=x[1],m=Object(c.useState)(!0),S=Object(l.a)(m,2),C=S[0],y=S[1],N=Object(c.useState)(null),T=Object(l.a)(N,2),D=T[0],P=T[1],I=Object(c.useState)(null),A=Object(l.a)(I,2),R=A[0],J=A[1],U=Object(c.useState)(""),q=Object(l.a)(U,2),B=q[0],M=q[1],G=Object(c.useState)(""),W=Object(l.a)(G,2),Z=W[0],H=W[1],K=Object(c.useState)(null),Q=Object(l.a)(K,2),V=Q[0],X=Q[1];Object(c.useEffect)((function(){L.getAll().then((function(e){f(e)}))}),[]),Object(c.useEffect)((function(){var e=window.localStorage.getItem("loggedAppUser");if(e){var t=JSON.parse(e);X(t),L.setToken(t.token)}}),[]),console.log("render",h.length,"notes");var Y=function(e){e.preventDefault(),console.log("button clicked",e.target);var t={content:v,date:(new Date).toISOString(),important:Math.random()<.5,id:v};L.create(t).then((function(e){f(h.concat(e)),g("")}))},$=function(e){console.log(e.target.value),g(e.target.value)},_=C?h:h.filter((function(e){return!0===e.important})),ee=function(e,t){P(e),J(t),setTimeout((function(){P(null)}),3e3)},te=function(){var e=Object(s.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),console.log("logging in with",B,Z),e.prev=2,e.next=5,F.login({username:B,password:Z});case 5:n=e.sent,window.localStorage.setItem("loggedAppUser",JSON.stringify(n)),L.setToken(n.token),X(n),M(""),H(""),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(2),ee("Wrong credentials",1),setTimeout((function(){P(null)}),5e3);case 17:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(t){return e.apply(this,arguments)}}();return Object(j.jsxs)("div",{children:[Object(j.jsxs)("div",{id:"contador",children:[Object(j.jsx)(b,{counter:n}),Object(j.jsx)(d,{handleClick:function(){return r(n+1)},text:"plus"}),Object(j.jsx)(d,{handleClick:function(){return r(0)},text:"zero"}),Object(j.jsx)(d,{handleClick:function(){return r(n-1)},text:"minus"})]}),Object(j.jsx)("br",{}),Object(j.jsx)("br",{}),Object(j.jsx)(w,{messaje:D,tipo:R}),Object(j.jsx)("br",{}),Object(j.jsx)("br",{}),null===V?Object(j.jsxs)("form",{onSubmit:te,children:[Object(j.jsxs)("div",{children:["username",Object(j.jsx)("input",{type:"text",value:B,name:"Username",onChange:function(e){var t=e.target;return M(t.value)}})]}),Object(j.jsxs)("div",{children:["password",Object(j.jsx)("input",{type:"password",value:Z,name:"Password",onChange:function(e){var t=e.target;return H(t.value)}})]}),Object(j.jsx)("button",{type:"submit",children:"login"})]}):Object(j.jsxs)("div",{children:[Object(j.jsxs)("div",{className:"user",children:[Object(j.jsxs)("p",{children:[Object(j.jsx)("strong",{children:"Bienvenid@:"})," ",V.name," "]}),Object(j.jsx)("button",{type:"submit",onClick:function(){window.localStorage.clear(),X(null)},children:" Salir"})]}),Object(j.jsxs)("div",{children:[Object(j.jsxs)("form",{onSubmit:Y,children:[Object(j.jsx)("input",{value:v,onChange:$}),Object(j.jsx)("button",{type:"submit",children:"save"})]}),Object(j.jsxs)("div",{id:"notas",children:[Object(j.jsx)("h1",{children:"Notes"}),Object(j.jsx)("div",{children:Object(j.jsxs)("button",{onClick:function(){return y(!C)},children:["show ",C?"important":"all"]})}),Object(j.jsx)("ul",{children:_.map((function(e){return Object(j.jsx)(O,{note:e,toggleImportance:function(){return function(e){var t=h.find((function(t){return t.id===e})),n=Object(u.a)(Object(u.a)({},t),{},{important:!t.important});console.log("ID::",e),console.log("changedNote::",n),L.update(e,n).then((function(n){console.log("RESPONSE",n),f(h.map((function(t){return t.id!==e?t:n}))),ee("Note '".concat(t.content,"' ha cambiado importancia!!!"),0)})).catch((function(n){console.log("ERROR",n),f(h.filter((function(t){return t.id!==e}))),ee("Nota '".concat(t.content,"' ya existe"),1)}))}(e.id)}},e.id)}))})]})]})]}),Object(j.jsx)("br",{}),Object(j.jsx)("br",{}),Object(j.jsxs)("div",{id:"guia-telefonica",children:[Object(j.jsx)("hr",{}),Object(j.jsx)(k,{})]}),Object(j.jsxs)("div",{children:[Object(j.jsx)("hr",{}),Object(j.jsx)(E,{})]}),Object(j.jsx)(z,{children:" "})]})},J=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,47)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,a=t.getLCP,i=t.getTTFB;n(e),c(e),r(e),a(e),i(e)}))};a.a.render(Object(j.jsx)(R,{}),document.getElementById("root")),J()}},[[46,1,2]]]);
//# sourceMappingURL=main.96fbe998.chunk.js.map